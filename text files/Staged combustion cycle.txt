Staged combustion cycle
The staged combustion cycle (sometimes known as topping cycle, preburner cycle, or closed cycle) is a power cycle of a bipropellant rocket engine. In the staged combustion cycle, propellant flows through multiple combustion chambers, and is thus combusted in stages. The main advantage relative to other rocket engine power cycles is high fuel efficiency, measured through specific impulse, while its main disadvantage is engineering complexity.
Typically, propellant flows through two kinds of combustion chambers; the first called preburner and the second called main combustion chamber. In the preburner, a small portion of propellant, usually fuel-rich, is partly combusted, and the increasing volume flow is used to drive the turbopumps that feed the engine with propellant. The gas is then injected into the main combustion chamber and combusted completely with the other propellant to produce thrust.
Tradeoffs
The main advantage is fuel efficiency due to all of the propellant flowing to the main combustion chamber, which also allows for higher thrust. The staged combustion cycle is sometimes referred to as closed cycle, as opposed to the gas generator, or open cycle where a portion of propellant never reaches the main combustion chamber. The disadvantage is engineering complexity, partly a result of the preburner exhaust of hot and highly pressurized gas which, particularly when oxidizer-rich, produces extremely harsh conditions for turbines and plumbing.
History
Staged combustion (Замкнутая схема) was first proposed by Alexey Isaev in 1949. The first staged combustion engine was the S1.5400 (11D33) used in the Soviet planetary rocket, designed by Melnikov, a former assistant to Isaev.[1] About the same time (1959), Nikolai Kuznetsov began work on the closed cycle engine NK-9 for Korolev's orbital ICBM, GR-1. Kuznetsov later evolved that design into the NK-15 and NK-33 engines for the unsuccessful Lunar N1 rocket. The non-cryogenic N2O4/UDMH engine RD-253 using staged combustion was developed by Valentin Glushko circa 1963 for the Proton rocket.
After the abandonment of the N1, Kuznetsov was ordered to destroy the NK-33 technology, but instead he warehoused dozens of the engines. In the 1990s, Aerojet was contacted and eventually visited Kuznetsov's plant. Upon meeting initial skepticism about the high specific impulse and other specifications, Kuznetsov shipped an engine to the US for testing. Oxidizer-rich staged combustion had been considered by American engineers, but was not considered a feasible direction because of resources they assumed the design would require to make work. The Russian RD-180 engine also employs a staged-combustion rocket engine cycle. Lockheed Martin began purchasing the RD-180 in circa 2000 for the Atlas III and later, the V, rockets. The purchase contract was subsequently taken over by United Launch Alliance (ULA--the Boeing/Lockheed-Martin joint venture) after 2006, and ULA continues to fly the Atlas V with RD-180 engines as of 2021.
The first laboratory staged-combustion test engine in the West was built in Germany in 1963, by Ludwig Boelkow. 
Hydrogen peroxide/kerosene powered engines such as the British Gamma of the 1950s may use a closed-cycle process by catalytically decomposing the peroxide to drive turbines before combustion with the kerosene in the combustion chamber proper. This gives the efficiency advantages of staged combustion, while avoiding major engineering problems.
The RS-25 Space Shuttle main engine is another example of a staged combustion engine, and the first to use liquid oxygen and liquid hydrogen. Its counterpart in the Soviet shuttle was the RD-0120, similar in specific impulse, thrust, and chamber pressure specification to the RS-25, but with some differences that reduced complexity and cost at the expense of increased engine weight.
Variants
Several variants of the staged combustion cycle exist. Preburners that burn a small portion of oxidizer with a full flow of fuel are called fuel-rich, while preburners that burn a small portion of fuel with a full flow of oxidizer are called oxidizer-rich. The RD-180 has an oxidizer-rich preburner, while the RS-25 has two fuel-rich preburners. The SpaceX Raptor has both oxidizer-rich and fuel-rich preburners, a design called full-flow staged combustion.
Staged combustion designs can be either single-shaft or twin-shaft. In the single-shaft design, one set of preburner and turbine drives both propellant turbopumps. Examples include the Energomash RD-180 and the Blue Origin BE-4. In the twin-shaft design, the two propellant turbopumps are driven by separate turbines, which are in turn driven by the outflow of either one or separate preburners. Examples of twin-shaft designs include the Rocketdyne RS-25, the JAXA LE-7, and the Raptor. Relative to a single-shaft design, the twin-shaft design requires an additional turbine (and possibly another preburner), but allows for individual control of the two turbopumps.
In addition to the propellant turbopumps, staged combustion engines often require smaller boost pumps to prevent both preburner backflow and turbopump cavitation. For example, the RD-180 and RS-25 use boost pumps driven by tap-off and expander cycles, as well as pressurized tanks, to incrementally increase propellant pressure prior to entering the preburner.
Full-flow staged combustion cycle
Full-flow staged combustion (FFSC) is a twin-shaft staged combustion cycle that uses both oxidizer-rich and fuel-rich preburners. The cycle allows full flow of both propellants through the turbines; hence the name. The fuel turbopump is driven by the fuel-rich preburner, and the oxidizer turbopump is driven by the oxidizer-rich preburner. 
Benefits of the full-flow staged combustion cycle include turbines that run cooler and at lower pressure, due to increased mass flow, leading to a longer engine life and higher reliability. As an example, up to 25 flights were anticipated for an engine design studied by the DLR (German Aerospace Center) in the frame of the SpaceLiner project, up to 1000 flights are expected for Raptor from SpaceX. Further, the full-flow cycle eliminates the need for an interpropellant turbine seal normally required to separate oxidizer-rich gas from the fuel turbopump or fuel-rich gas from the oxidizer turbopump, thus improving reliability.
Since the use of both fuel and oxidizer preburners results in full gasification of each propellant before entering the combustion chamber, FFSC engines belong to a broader class of rocket engines called gas-gas engines. Full gasification of components leads to faster chemical reactions in the combustion chamber, allowing a smaller combustion chamber. This in turn makes it feasible to increase the chamber pressure, which increases efficiency.
Potential disadvantages of the full-flow staged combustion cycle include increased engineering complexity of two preburners, relative to a single-shaft staged combustion cycle, as well as an increased parts count.
As of 2019, only three full-flow staged combustion rocket engines had ever progressed sufficiently to be tested on test stands; the Soviet Energomash RD-270 project in the 1960s, the US government-funded Aerojet Rocketdyne Integrated powerhead demonstration project in the mid-2000s,  and SpaceX's flight capable Raptor engine first test-fired in February 2019. 
The first flight test of a full-flow staged-combustion engine occurred on 25 July 2019 when SpaceX flew their Raptor methalox FFSC engine on the Starhopper test rocket, at their South Texas Launch Site.

Applications
Oxidizer-rich staged combustion
S1.5400—First staged combustion rocket engine used on the Blok L upper stage. 
NK-33—Soviet engine developed for the never-flown upgraded version of the N-1 launch vehicle. Later sold to Aerojet Rocketdyne and refurbished/remarketed as the AJ-26 (used on Antares block 1 launch vehicles in 2013–2014). In use on the Soyuz-2-1v.
P111 - liquid oxygen/kerosene demonstrator engine developed between 1956 and 1967 at Bolkow GmbH (later Astrium). 
RD-170, RD-171, RD-180 and RD-191—a series of Soviet and Russian engines used on the Energia, Zenit, Atlas V, Angara and previously on the Atlas III launch vehicles. RD-171 (and its RD-171M successor), -180 and -191 are derivatives of RD-170.
RD-0124—a series of oxygen/kerosene engines used in the second stage of Soyuz-2.1b rocket as well as in upper stages of Angara series rockets.
YF-100—Chinese engine developed in the 2000s; used on the Long March 5, Long March 6, and Long March 7. 
AR1—An Aerojet Rocketdyne project partially funded by the United States Air Force as a potential replacement for the RD-180 Russian engine. 
BE-4—Blue Origin LCH4/LOX engine—using the oxygen-rich staged combustion (ORSC) cycle—planned to be used on the ULA Vulcan launch vehicle, which will replace the Atlas V and Delta IV, first flight test in 2021 and also on Blue Origin's New Glenn launch vehicle, with first flight test no earlier than 2021. 
RD-253—Soviet engine developed in the 1960s and used on the Proton launch vehicle's first stage. Later variants include the RD-275 and RD-275M.
SCE-200—Indian RP-1/LOX main stage engine in development. 
Hadley—Ursa Major Technologies LOX/kerosene booster engine under development near Denver, Colorado. 
Rocket Factory Augsburg "Helix" LOX/kerosene engine under development which should power the RFA One  near Augsburg, Germany.
Launcher E-2 — LOX/kerosene engine under development which should power the Launcher Light launch vehicle. 
Fuel-rich staged combustion
RS-25—US developed LH2/LOX engine in the 1970–1980s, flown on the Space Shuttle through 2011 (with periodic upgrades), and planned for further use on the Space Launch System in 2020s.
RD-0120—LH2/LOX engine used on the Energia rocket.
LE-7—LH2/LOX engine used on the H-II rocket family.
KVD-1 (RD-56)—Soviet LH2/LOX upper stage engine developed for the never-flown upgraded version of the N-1 launch vehicle. Used on the GSLV Mk1.
CE-7.5—Indian LH2/LOX upper stage engine, used on the GSLV Mk2
Full-flow staged combustion
RD-270—USSR engine under development 1962–1970 for the UR-700 project; never flown. 
Integrated powerhead demonstrator—Demonstration project for the front part of a full flow engine, with no combustion chamber or other backend subsystems. US project to develop a part of a new rocket engine technology in the early 2000s; no full engine ever built; never flown.
Raptor—SpaceX LCH4/LOX engine in development, first flown in 2019 

Future applications of staged-combustion engines
Starship's first stage and second stage powered by up to a combined 39 Raptor engines 
New Glenn first stage with 7 BE-4 engines
Vulcan first stage with 2 BE-4 engines
Long March 5DY
Long March 9

